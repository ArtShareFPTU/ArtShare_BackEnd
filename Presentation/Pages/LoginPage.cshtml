@page
@model Presentation.Pages.LoginPage
@{
    ViewData["Title"] = "LoginPage";
}


<!DOCTYPE html>
<html lang="en">
<head>
    <link href="css/loginpage.css" rel="stylesheet"/>
</head>
<body>
<h2>Weekly Coding Challenge #1: Sign in/up Form</h2>
<div class="container" id="container">
    <div class="form-container sign-up-container">
        <form action="#">
            <h1>Create Account</h1>
            <div class="social-container">
                <a href="#" class="social">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="social">
                    <i class="fab fa-google-plus-g"></i>
                </a>
                <a href="#" class="social">
                    <i class="fab fa-linkedin-in"></i>
                </a>
            </div>
            <span>or use your email for registration</span>
            <input type="text" placeholder="Name"/>
            <input type="email" placeholder="Email"/>
            <input type="password" placeholder="Password"/>
            <button>Sign Up</button>
        </form>
    </div>
    <div class="form-container sign-in-container">
        <form action="#">
            <h1>Sign in</h1>
            <div class="social-container">
                <a href="#" class="social">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="#" class="social">
                    <i class="fab fa-google-plus-g"></i>
                </a>
                <a href="#" class="social">
                    <i class="fab fa-linkedin-in"></i>
                </a>
            </div>
            <span>or use your account</span>
            <input type="email" placeholder="Email"/>
            <input type="password" placeholder="Password"/>
            <a href="#">Forgot your password?</a>
            <button onclick="Login()">Sign In</button>
        </form>
    </div>
    <div class="overlay-container">
        <div class="overlay">
            <div class="overlay-panel overlay-left">
                <h1>Welcome Back!</h1>
                <p>To keep connected with us please login with your personal info</p>
                <button class="ghost" id="signIn">Sign In</button>
            </div>
            <div class="overlay-panel overlay-right">
                <h1>Hello, Friend!</h1>
                <p>Enter your personal details and start journey with us</p>
                <button class="ghost" id="signUp">Sign Up</button>
            </div>
        </div>
    </div>
</div>

<footer>
    <p>
        Created with <i class="fa fa-heart"></i> by
        <a target="_blank" href="https://florin-pop.com">Florin Pop</a>
        - Read how I created this and how you can join the challenge
        <a target="_blank" href="https://www.florin-pop.com/blog/2019/03/double-slider-sign-in-up-form/">here</a>.
    </p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="js/loginpage.js"></script>
<script>
        $(document).ready(function() {
            $('#loginForm').submit(function(e) {
                data = new FormData();
                data.append("email", $('#email').val());
                data.append("password", $('#password').val());
                $.ajax({
                    type: 'POST',
                    url: 'https://localhost:7168/api/Account/Login', // Đường dẫn đến API xử lý đăng nhập trên máy chủ
                    dataType: 'json',
                    data: data,
                    contentType: "application/json",
                    success: function(response) {
                        // Xử lý kết quả trả về từ máy chủ
                        if (response.statusCode === 200){
                            window.location.href = '/HomePage';
                        }
                        console.log(response);
                        // Ví dụ: chuyển hướng sau khi đăng nhập thành công
                        
                    },
                    error: function(xhr, status, error) {
                        // Xử lý lỗi
                        console.error(error);
                    }
                });
            });
        });
        
        function Login(){
            var obj = {
                email: $('#email').val(),
                password: $('#password').val()
            }
            $.ajax({
                                type: 'POST',
                                url: 'https://localhost:7168/api/Account/Login', // Đường dẫn đến API xử lý đăng nhập trên máy chủ
                                dataType: 'json',
                                data: data,
                                contentType: "application/json",
                                success: function(response) {
                                    // Xử lý kết quả trả về từ máy chủ
                                    if (response.statusCode === 200){
                                        window.location.href = '/HomePage';
                                    }
                                    console.log(response);
                                    // Ví dụ: chuyển hướng sau khi đăng nhập thành công
                                    
                                },
                                error: function(xhr, status, error) {
                                    // Xử lý lỗi
                                    console.error(error);
                                }
            });
        }
    </script>
</body>
</html>